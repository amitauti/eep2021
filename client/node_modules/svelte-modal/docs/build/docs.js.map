{"version":3,"file":"docs.js","sources":["../../build/Modal.js","../../node_modules/svelte/shared.js","../src/ModalContent.html","../src/Demo.html","../src/docs.js"],"sourcesContent":["function isDate(obj) {\n    return Object.prototype.toString.call(obj) === '[object Date]';\n}\n\nvar scheduler$1 = {\n    components: [],\n    running: false,\n    add: function (component) {\n        if (~scheduler$1.components.indexOf(component))\n            return;\n        scheduler$1.components.push(component);\n        if (!scheduler$1.running) {\n            scheduler$1.running = true;\n            requestAnimationFrame(scheduler$1.next);\n        }\n    },\n    next: function () {\n        var hasComponents = false;\n        var i = scheduler$1.components.length;\n        while (i--) {\n            var component = scheduler$1.components[i];\n            var data = {};\n            var hasSprings = false;\n            for (var key in component._springs) {\n                var spring_1 = component._springs[key];\n                if (spring_1(data)) {\n                    hasSprings = true;\n                    hasComponents = true;\n                }\n                else {\n                    component._springCallbacks[key]();\n                    delete component._springs[key];\n                    delete component._springCallbacks[key];\n                }\n            }\n            component._springing = true;\n            component.set(data);\n            component._springing = false;\n            if (!hasSprings)\n                scheduler$1.components.splice(i, 1);\n        }\n        if (hasComponents) {\n            requestAnimationFrame(scheduler$1.next);\n        }\n        else {\n            scheduler$1.running = false;\n        }\n    }\n};\nfunction snap$1(key, a, b, options) {\n    return function (object) {\n        object[key] = b;\n        return false;\n    };\n}\nfunction number(key, a, b, options) {\n    var velocity = 0;\n    var stiffness = options.stiffness, damping = options.damping;\n    var valueThreshold = Math.abs(b - a) * 0.001;\n    var velocityThreshold = valueThreshold; // TODO is this right?\n    return function (object) {\n        var d = b - a;\n        var spring = stiffness * d;\n        var damper = damping * velocity;\n        var acceleration = spring - damper;\n        velocity += acceleration;\n        a += velocity;\n        object[key] = a;\n        if (velocity < velocityThreshold &&\n            Math.abs(b - a) < valueThreshold) {\n            object[key] = b;\n            return false;\n        }\n        object[key] = a;\n        return true;\n    };\n}\nfunction date(key, a, b, options) {\n    var dummy = {};\n    var subspring = number(key, a.getTime(), b.getTime(), options);\n    return function (object) {\n        if (!subspring(dummy)) {\n            object[key] = b;\n            return false;\n        }\n        object[key] = new Date(dummy[key]);\n        return true;\n    };\n}\nfunction array(key, a, b, options) {\n    var value = [];\n    var subsprings = [];\n    for (var i = 0; i < a.length; i += 1) {\n        subsprings.push(getSpring(i, a[i], b[i], options));\n    }\n    return function (object) {\n        var active = false;\n        for (var i = 0; i < subsprings.length; i += 1) {\n            if (subsprings[i](value))\n                active = true;\n        }\n        if (!active) {\n            object[key] = b;\n            return false;\n        }\n        object[key] = value;\n        return true;\n    };\n}\nfunction object(key, a, b, options) {\n    var value = {};\n    var subsprings = [];\n    for (var k in a) {\n        subsprings.push(getSpring(k, a[k], b[k], options));\n    }\n    return function (object) {\n        var active = false;\n        for (var i = 0; i < subsprings.length; i += 1) {\n            if (subsprings[i](value))\n                active = true;\n        }\n        if (!active) {\n            object[key] = b;\n            return false;\n        }\n        object[key] = value;\n        return true;\n    };\n}\nfunction getSpring(key, a, b, options) {\n    if (a === b || a !== a)\n        return snap$1(key, a, b, options);\n    var type = typeof a;\n    if (type !== typeof b || Array.isArray(a) !== Array.isArray(b)) {\n        throw new Error('Cannot interpolate values of different type');\n    }\n    if (Array.isArray(a)) {\n        if (a.length !== b.length) {\n            throw new Error('Cannot interpolate arrays of different length');\n        }\n        return array(key, a, b, options);\n    }\n    if (type === 'object') {\n        if (!a || !b)\n            throw new Error('Object cannot be null');\n        if (isDate(a) && isDate(b)) {\n            return date(key, a, b, options);\n        }\n        if (!keysMatch(a, b))\n            throw new Error('Cannot interpolate differently-shaped objects');\n        return object(key, a, b, options);\n    }\n    if (type === 'number') {\n        return number(key, a, b, options);\n    }\n    throw new Error(\"Cannot interpolate \" + type + \" values\");\n}\nfunction spring(key, to, options) {\n    var _this = this;\n    if (!this._springs) {\n        this._springs = Object.create(null);\n        this._springCallbacks = Object.create(null);\n        this._springing = false;\n        var set_1 = this.set;\n        this.set = function (data) {\n            if (!_this._springing) {\n                for (var key_1 in data) {\n                    delete _this._springs[key_1];\n                }\n            }\n            set_1.call(_this, data);\n        };\n    }\n    var spring = getSpring(key, this.get(key), to, options);\n    this._springs[key] = spring;\n    var promise = new Promise(function (fulfil) {\n        _this._springCallbacks[key] = fulfil;\n    });\n    scheduler$1.add(this);\n    return promise;\n}\nfunction keysMatch(a, b) {\n    var aKeys = Object.keys(a);\n    var bKeys = Object.keys(b);\n    if (aKeys.length !== bKeys.length)\n        return false;\n    for (var i = 0; i < aKeys.length; i += 1) {\n        if (!(aKeys[i] in b))\n            return false;\n    }\n    return true;\n}\n\nfunction noop() {}\n\nfunction assign(target) {\n\tvar k,\n\t\tsource,\n\t\ti = 1,\n\t\tlen = arguments.length;\n\tfor (; i < len; i++) {\n\t\tsource = arguments[i];\n\t\tfor (k in source) target[k] = source[k];\n\t}\n\n\treturn target;\n}\n\nfunction appendNode(node, target) {\n\ttarget.appendChild(node);\n}\n\nfunction insertNode(node, target, anchor) {\n\ttarget.insertBefore(node, anchor);\n}\n\nfunction detachNode(node) {\n\tnode.parentNode.removeChild(node);\n}\n\nfunction createElement(name) {\n\treturn document.createElement(name);\n}\n\nfunction setAttribute(node, attribute, value) {\n\tnode.setAttribute(attribute, value);\n}\n\nfunction setStyle(node, key, value) {\n\tnode.style.setProperty(key, value);\n}\n\nfunction destroy(detach) {\n\tthis.destroy = noop;\n\tthis.fire('destroy');\n\tthis.set = this.get = noop;\n\n\tif (detach !== false) this._fragment.unmount();\n\tthis._fragment.destroy();\n\tthis._fragment = this._state = null;\n}\n\nfunction differs(a, b) {\n\treturn a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\n\nfunction dispatchObservers(component, group, changed, newState, oldState) {\n\tfor (var key in group) {\n\t\tif (!changed[key]) continue;\n\n\t\tvar newValue = newState[key];\n\t\tvar oldValue = oldState[key];\n\n\t\tvar callbacks = group[key];\n\t\tif (!callbacks) continue;\n\n\t\tfor (var i = 0; i < callbacks.length; i += 1) {\n\t\t\tvar callback = callbacks[i];\n\t\t\tif (callback.__calling) continue;\n\n\t\t\tcallback.__calling = true;\n\t\t\tcallback.call(component, newValue, oldValue);\n\t\t\tcallback.__calling = false;\n\t\t}\n\t}\n}\n\nfunction get(key) {\n\treturn key ? this._state[key] : this._state;\n}\n\nfunction fire(eventName, data) {\n\tvar handlers =\n\t\teventName in this._handlers && this._handlers[eventName].slice();\n\tif (!handlers) return;\n\n\tfor (var i = 0; i < handlers.length; i += 1) {\n\t\thandlers[i].call(this, data);\n\t}\n}\n\nfunction observe(key, callback, options) {\n\tvar group = options && options.defer\n\t\t? this._observers.post\n\t\t: this._observers.pre;\n\n\t(group[key] || (group[key] = [])).push(callback);\n\n\tif (!options || options.init !== false) {\n\t\tcallback.__calling = true;\n\t\tcallback.call(this, this._state[key]);\n\t\tcallback.__calling = false;\n\t}\n\n\treturn {\n\t\tcancel: function() {\n\t\t\tvar index = group[key].indexOf(callback);\n\t\t\tif (~index) group[key].splice(index, 1);\n\t\t}\n\t};\n}\n\nfunction on(eventName, handler) {\n\tif (eventName === 'teardown') return this.on('destroy', handler);\n\n\tvar handlers = this._handlers[eventName] || (this._handlers[eventName] = []);\n\thandlers.push(handler);\n\n\treturn {\n\t\tcancel: function() {\n\t\t\tvar index = handlers.indexOf(handler);\n\t\t\tif (~index) handlers.splice(index, 1);\n\t\t}\n\t};\n}\n\nfunction set(newState) {\n\tthis._set(assign({}, newState));\n\tif (this._root._lock) return;\n\tthis._root._lock = true;\n\tcallAll(this._root._beforecreate);\n\tcallAll(this._root._oncreate);\n\tcallAll(this._root._aftercreate);\n\tthis._root._lock = false;\n}\n\nfunction _set(newState) {\n\tvar oldState = this._state,\n\t\tchanged = {},\n\t\tdirty = false;\n\n\tfor (var key in newState) {\n\t\tif (differs(newState[key], oldState[key])) changed[key] = dirty = true;\n\t}\n\tif (!dirty) return;\n\n\tthis._state = assign({}, oldState, newState);\n\tthis._recompute(changed, this._state, oldState, false);\n\tif (this._bind) this._bind(changed, this._state);\n\tdispatchObservers(this, this._observers.pre, changed, this._state, oldState);\n\tthis._fragment.update(changed, this._state);\n\tdispatchObservers(this, this._observers.post, changed, this._state, oldState);\n}\n\nfunction callAll(fns) {\n\twhile (fns && fns.length) fns.pop()();\n}\n\nfunction _mount(target, anchor) {\n\tthis._fragment.mount(target, anchor);\n}\n\nfunction _unmount() {\n\tthis._fragment.unmount();\n}\n\nvar proto = {\n\tdestroy: destroy,\n\tget: get,\n\tfire: fire,\n\tobserve: observe,\n\ton: on,\n\tset: set,\n\tteardown: destroy,\n\t_recompute: noop,\n\t_set: _set,\n\t_mount: _mount,\n\t_unmount: _unmount\n};\n\nvar template$1 = (function() {\nconst DEFAULTS = {\n  opacity: 0.3,\n  background: '#000000'\n};\nObject.freeze(DEFAULTS);\n\nreturn {\n  setup (Scrim) {\n    Scrim.DEFAULTS = DEFAULTS;\n  },\n\n  data () {\n    return Object.assign({}, DEFAULTS)\n  }\n}\n}());\n\nfunction encapsulateStyles$1(node) {\n\tsetAttribute(node, \"svelte-1216306015\", \"\");\n}\n\nfunction add_css$1() {\n\tvar style = createElement(\"style\");\n\tstyle.id = 'svelte-1216306015-style';\n\tstyle.textContent = \".svelte-scrim[svelte-1216306015]{position:fixed;top:0;right:0;left:0;height:100vh;-webkit-tap-highlight-color:rgba(0, 0, 0, 0)}\";\n\tappendNode(style, document.head);\n}\n\nfunction create_main_fragment$1(state, component) {\n\tvar div;\n\n\treturn {\n\t\tcreate: function() {\n\t\t\tdiv = createElement(\"div\");\n\t\t\tthis.hydrate();\n\t\t},\n\n\t\thydrate: function(nodes) {\n\t\t\tencapsulateStyles$1(div);\n\t\t\tdiv.className = \"svelte-scrim\";\n\t\t\tsetStyle(div, \"opacity\", state.opacity);\n\t\t\tsetStyle(div, \"background\", state.background);\n\t\t},\n\n\t\tmount: function(target, anchor) {\n\t\t\tinsertNode(div, target, anchor);\n\t\t},\n\n\t\tupdate: function(changed, state) {\n\t\t\tif ( changed.opacity ) {\n\t\t\t\tsetStyle(div, \"opacity\", state.opacity);\n\t\t\t}\n\n\t\t\tif ( changed.background ) {\n\t\t\t\tsetStyle(div, \"background\", state.background);\n\t\t\t}\n\t\t},\n\n\t\tunmount: function() {\n\t\t\tdetachNode(div);\n\t\t},\n\n\t\tdestroy: noop\n\t};\n}\n\nfunction Scrim(options) {\n\tthis.options = options;\n\tthis._state = assign(template$1.data(), options.data);\n\n\tthis._observers = {\n\t\tpre: Object.create(null),\n\t\tpost: Object.create(null)\n\t};\n\n\tthis._handlers = Object.create(null);\n\n\tthis._root = options._root || this;\n\tthis._yield = options._yield;\n\tthis._bind = options._bind;\n\n\tif (!document.getElementById(\"svelte-1216306015-style\")) add_css$1();\n\n\tthis._fragment = create_main_fragment$1(this._state, this);\n\n\tif (options.target) {\n\t\tthis._fragment.create();\n\t\tthis._fragment.mount(options.target, options.anchor || null);\n\t}\n}\n\nassign(Scrim.prototype, proto );\n\ntemplate$1.setup(Scrim);\n\nvar tabbable = function(el) {\n  var basicTabbables = [];\n  var orderedTabbables = [];\n\n  // A node is \"available\" if\n  // - it's computed style\n  var isUnavailable = createIsUnavailable();\n\n  var candidateSelectors = [\n    'input',\n    'select',\n    'a[href]',\n    'textarea',\n    'button',\n    '[tabindex]',\n  ];\n\n  var candidates = el.querySelectorAll(candidateSelectors);\n\n  var candidate, candidateIndex;\n  for (var i = 0, l = candidates.length; i < l; i++) {\n    candidate = candidates[i];\n    candidateIndex = parseInt(candidate.getAttribute('tabindex'), 10) || candidate.tabIndex;\n\n    if (\n      candidateIndex < 0\n      || (candidate.tagName === 'INPUT' && candidate.type === 'hidden')\n      || candidate.disabled\n      || isUnavailable(candidate)\n    ) {\n      continue;\n    }\n\n    if (candidateIndex === 0) {\n      basicTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        index: i,\n        tabIndex: candidateIndex,\n        node: candidate,\n      });\n    }\n  }\n\n  var tabbableNodes = orderedTabbables\n    .sort(function(a, b) {\n      return a.tabIndex === b.tabIndex ? a.index - b.index : a.tabIndex - b.tabIndex;\n    })\n    .map(function(a) {\n      return a.node\n    });\n\n  Array.prototype.push.apply(tabbableNodes, basicTabbables);\n\n  return tabbableNodes;\n};\n\nfunction createIsUnavailable() {\n  // Node cache must be refreshed on every check, in case\n  // the content of the element has changed\n  var isOffCache = [];\n\n  // \"off\" means `display: none;`, as opposed to \"hidden\",\n  // which means `visibility: hidden;`. getComputedStyle\n  // accurately reflects visiblity in context but not\n  // \"off\" state, so we need to recursively check parents.\n\n  function isOff(node, nodeComputedStyle) {\n    if (node === document.documentElement) return false;\n\n    // Find the cached node (Array.prototype.find not available in IE9)\n    for (var i = 0, length = isOffCache.length; i < length; i++) {\n      if (isOffCache[i][0] === node) return isOffCache[i][1];\n    }\n\n    nodeComputedStyle = nodeComputedStyle || window.getComputedStyle(node);\n\n    var result = false;\n\n    if (nodeComputedStyle.display === 'none') {\n      result = true;\n    } else if (node.parentNode) {\n      result = isOff(node.parentNode);\n    }\n\n    isOffCache.push([node, result]);\n\n    return result;\n  }\n\n  return function isUnavailable(node) {\n    if (node === document.documentElement) return false;\n\n    var computedStyle = window.getComputedStyle(node);\n\n    if (isOff(node, computedStyle)) return true;\n\n    return computedStyle.visibility === 'hidden';\n  }\n}\n\nvar listeningFocusTrap = null;\n\nfunction focusTrap(element, userOptions) {\n  var tabbableNodes = [];\n  var nodeFocusedBeforeActivation = null;\n  var active = false;\n  var paused = false;\n\n  var container = (typeof element === 'string')\n    ? document.querySelector(element)\n    : element;\n\n  var config = userOptions || {};\n  config.returnFocusOnDeactivate = (userOptions && userOptions.returnFocusOnDeactivate !== undefined)\n    ? userOptions.returnFocusOnDeactivate\n    : true;\n  config.escapeDeactivates = (userOptions && userOptions.escapeDeactivates !== undefined)\n    ? userOptions.escapeDeactivates\n    : true;\n\n  var trap = {\n    activate: activate,\n    deactivate: deactivate,\n    pause: pause,\n    unpause: unpause,\n  };\n\n  return trap;\n\n  function activate(activateOptions) {\n    if (active) return;\n\n    var defaultedActivateOptions = {\n      onActivate: (activateOptions && activateOptions.onActivate !== undefined)\n        ? activateOptions.onActivate\n        : config.onActivate,\n    };\n\n    active = true;\n    paused = false;\n    nodeFocusedBeforeActivation = document.activeElement;\n\n    if (defaultedActivateOptions.onActivate) {\n      defaultedActivateOptions.onActivate();\n    }\n\n    addListeners();\n    return trap;\n  }\n\n  function deactivate(deactivateOptions) {\n    if (!active) return;\n\n    var defaultedDeactivateOptions = {\n      returnFocus: (deactivateOptions && deactivateOptions.returnFocus !== undefined)\n        ? deactivateOptions.returnFocus\n        : config.returnFocusOnDeactivate,\n      onDeactivate: (deactivateOptions && deactivateOptions.onDeactivate !== undefined)\n        ? deactivateOptions.onDeactivate\n        : config.onDeactivate,\n    };\n\n    removeListeners();\n\n    if (defaultedDeactivateOptions.onDeactivate) {\n      defaultedDeactivateOptions.onDeactivate();\n    }\n\n    if (defaultedDeactivateOptions.returnFocus) {\n      setTimeout(function () {\n        tryFocus(nodeFocusedBeforeActivation);\n      }, 0);\n    }\n\n    active = false;\n    paused = false;\n    return this;\n  }\n\n  function pause() {\n    if (paused || !active) return;\n    paused = true;\n    removeListeners();\n  }\n\n  function unpause() {\n    if (!paused || !active) return;\n    paused = false;\n    addListeners();\n  }\n\n  function addListeners() {\n    if (!active) return;\n\n    // There can be only one listening focus trap at a time\n    if (listeningFocusTrap) {\n      listeningFocusTrap.pause();\n    }\n    listeningFocusTrap = trap;\n\n    updateTabbableNodes();\n    tryFocus(firstFocusNode());\n    document.addEventListener('focus', checkFocus, true);\n    document.addEventListener('click', checkClick, true);\n    document.addEventListener('mousedown', checkPointerDown, true);\n    document.addEventListener('touchstart', checkPointerDown, true);\n    document.addEventListener('keydown', checkKey, true);\n\n    return trap;\n  }\n\n  function removeListeners() {\n    if (!active || listeningFocusTrap !== trap) return;\n\n    document.removeEventListener('focus', checkFocus, true);\n    document.removeEventListener('click', checkClick, true);\n    document.removeEventListener('mousedown', checkPointerDown, true);\n    document.removeEventListener('touchstart', checkPointerDown, true);\n    document.removeEventListener('keydown', checkKey, true);\n\n    listeningFocusTrap = null;\n\n    return trap;\n  }\n\n  function getNodeForOption(optionName) {\n    var optionValue = config[optionName];\n    var node = optionValue;\n    if (!optionValue) {\n      return null;\n    }\n    if (typeof optionValue === 'string') {\n      node = document.querySelector(optionValue);\n      if (!node) {\n        throw new Error('`' + optionName + '` refers to no known node');\n      }\n    }\n    if (typeof optionValue === 'function') {\n      node = optionValue();\n      if (!node) {\n        throw new Error('`' + optionName + '` did not return a node');\n      }\n    }\n    return node;\n  }\n\n  function firstFocusNode() {\n    var node;\n    if (getNodeForOption('initialFocus') !== null) {\n      node = getNodeForOption('initialFocus');\n    } else if (container.contains(document.activeElement)) {\n      node = document.activeElement;\n    } else {\n      node = tabbableNodes[0] || getNodeForOption('fallbackFocus');\n    }\n\n    if (!node) {\n      throw new Error('You can\\'t have a focus-trap without at least one focusable element');\n    }\n\n    return node;\n  }\n\n  // This needs to be done on mousedown and touchstart instead of click\n  // so that it precedes the focus event\n  function checkPointerDown(e) {\n    if (config.clickOutsideDeactivates && !container.contains(e.target)) {\n      deactivate({ returnFocus: false });\n    }\n  }\n\n  function checkClick(e) {\n    if (config.clickOutsideDeactivates) return;\n    if (container.contains(e.target)) return;\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  }\n\n  function checkFocus(e) {\n    if (container.contains(e.target)) return;\n    e.preventDefault();\n    e.stopImmediatePropagation();\n    // Checking for a blur method here resolves a Firefox issue (#15)\n    if (typeof e.target.blur === 'function') e.target.blur();\n  }\n\n  function checkKey(e) {\n    if (e.key === 'Tab' || e.keyCode === 9) {\n      handleTab(e);\n    }\n\n    if (config.escapeDeactivates !== false && isEscapeEvent(e)) {\n      deactivate();\n    }\n  }\n\n  function handleTab(e) {\n    e.preventDefault();\n    updateTabbableNodes();\n    var currentFocusIndex = tabbableNodes.indexOf(e.target);\n    var lastTabbableNode = tabbableNodes[tabbableNodes.length - 1];\n    var firstTabbableNode = tabbableNodes[0];\n\n    if (e.shiftKey) {\n      if (e.target === firstTabbableNode || tabbableNodes.indexOf(e.target) === -1) {\n        return tryFocus(lastTabbableNode);\n      }\n      return tryFocus(tabbableNodes[currentFocusIndex - 1]);\n    }\n\n    if (e.target === lastTabbableNode) return tryFocus(firstTabbableNode);\n\n    tryFocus(tabbableNodes[currentFocusIndex + 1]);\n  }\n\n  function updateTabbableNodes() {\n    tabbableNodes = tabbable(container);\n  }\n}\n\nfunction isEscapeEvent(e) {\n  return e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27;\n}\n\nfunction tryFocus(node) {\n  if (!node || !node.focus) return;\n  node.focus();\n  if (node.tagName.toLowerCase() === 'input') {\n    node.select();\n  }\n}\n\nvar focusTrap_1$1 = focusTrap;\n\nconst activeModals = [];\n\nconst makeModalStackable = modal => {\n  modal.on('opening', () => {\n    activeModals.forEach(modal => modal.background());\n    modal.foreground();\n    activeModals.push(modal);\n    const deactivate = () => {\n      hiddenListener.cancel();\n      destroyListener.cancel();\n      activeModals.pop();\n      const nextModal = activeModals[activeModals.length - 1];\n      // without setTimeout, the esc key event that dismisses a modal will also dismiss the next one\n      nextModal && setTimeout(() => nextModal.foreground());\n    };\n    const hiddenListener = modal.on(modal.constructor.FIRES.hiding, deactivate);\n    const destroyListener = modal.on('destroy', deactivate);\n  });\n};\n\nfunction noop$1() {}\n\nfunction assign$1(target) {\n\tvar k,\n\t\tsource,\n\t\ti = 1,\n\t\tlen = arguments.length;\n\tfor (; i < len; i++) {\n\t\tsource = arguments[i];\n\t\tfor (k in source) target[k] = source[k];\n\t}\n\n\treturn target;\n}\n\nfunction appendNode$1(node, target) {\n\ttarget.appendChild(node);\n}\n\nfunction insertNode$1(node, target, anchor) {\n\ttarget.insertBefore(node, anchor);\n}\n\nfunction detachNode$1(node) {\n\tnode.parentNode.removeChild(node);\n}\n\nfunction reinsertChildren(parent, target) {\n\twhile (parent.firstChild) target.appendChild(parent.firstChild);\n}\n\nfunction createElement$1(name) {\n\treturn document.createElement(name);\n}\n\nfunction createText(data) {\n\treturn document.createTextNode(data);\n}\n\nfunction addListener(node, event, handler) {\n\tnode.addEventListener(event, handler, false);\n}\n\nfunction removeListener(node, event, handler) {\n\tnode.removeEventListener(event, handler, false);\n}\n\nfunction setAttribute$1(node, attribute, value) {\n\tnode.setAttribute(attribute, value);\n}\n\nfunction setStyle$1(node, key, value) {\n\tnode.style.setProperty(key, value);\n}\n\nfunction destroy$1(detach) {\n\tthis.destroy = noop$1;\n\tthis.fire('destroy');\n\tthis.set = this.get = noop$1;\n\n\tif (detach !== false) this._fragment.unmount();\n\tthis._fragment.destroy();\n\tthis._fragment = this._state = null;\n}\n\nfunction differs$1(a, b) {\n\treturn a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\n\nfunction dispatchObservers$1(component, group, changed, newState, oldState) {\n\tfor (var key in group) {\n\t\tif (!changed[key]) continue;\n\n\t\tvar newValue = newState[key];\n\t\tvar oldValue = oldState[key];\n\n\t\tvar callbacks = group[key];\n\t\tif (!callbacks) continue;\n\n\t\tfor (var i = 0; i < callbacks.length; i += 1) {\n\t\t\tvar callback = callbacks[i];\n\t\t\tif (callback.__calling) continue;\n\n\t\t\tcallback.__calling = true;\n\t\t\tcallback.call(component, newValue, oldValue);\n\t\t\tcallback.__calling = false;\n\t\t}\n\t}\n}\n\nfunction get$1(key) {\n\treturn key ? this._state[key] : this._state;\n}\n\nfunction fire$1(eventName, data) {\n\tvar handlers =\n\t\teventName in this._handlers && this._handlers[eventName].slice();\n\tif (!handlers) return;\n\n\tfor (var i = 0; i < handlers.length; i += 1) {\n\t\thandlers[i].call(this, data);\n\t}\n}\n\nfunction observe$1(key, callback, options) {\n\tvar group = options && options.defer\n\t\t? this._observers.post\n\t\t: this._observers.pre;\n\n\t(group[key] || (group[key] = [])).push(callback);\n\n\tif (!options || options.init !== false) {\n\t\tcallback.__calling = true;\n\t\tcallback.call(this, this._state[key]);\n\t\tcallback.__calling = false;\n\t}\n\n\treturn {\n\t\tcancel: function() {\n\t\t\tvar index = group[key].indexOf(callback);\n\t\t\tif (~index) group[key].splice(index, 1);\n\t\t}\n\t};\n}\n\nfunction on$1(eventName, handler) {\n\tif (eventName === 'teardown') return this.on('destroy', handler);\n\n\tvar handlers = this._handlers[eventName] || (this._handlers[eventName] = []);\n\thandlers.push(handler);\n\n\treturn {\n\t\tcancel: function() {\n\t\t\tvar index = handlers.indexOf(handler);\n\t\t\tif (~index) handlers.splice(index, 1);\n\t\t}\n\t};\n}\n\nfunction set$1(newState) {\n\tthis._set(assign$1({}, newState));\n\tif (this._root._lock) return;\n\tthis._root._lock = true;\n\tcallAll$1(this._root._beforecreate);\n\tcallAll$1(this._root._oncreate);\n\tcallAll$1(this._root._aftercreate);\n\tthis._root._lock = false;\n}\n\nfunction _set$1(newState) {\n\tvar oldState = this._state,\n\t\tchanged = {},\n\t\tdirty = false;\n\n\tfor (var key in newState) {\n\t\tif (differs$1(newState[key], oldState[key])) changed[key] = dirty = true;\n\t}\n\tif (!dirty) return;\n\n\tthis._state = assign$1({}, oldState, newState);\n\tthis._recompute(changed, this._state, oldState, false);\n\tif (this._bind) this._bind(changed, this._state);\n\tdispatchObservers$1(this, this._observers.pre, changed, this._state, oldState);\n\tthis._fragment.update(changed, this._state);\n\tdispatchObservers$1(this, this._observers.post, changed, this._state, oldState);\n}\n\nfunction callAll$1(fns) {\n\twhile (fns && fns.length) fns.pop()();\n}\n\nfunction _mount$1(target, anchor) {\n\tthis._fragment.mount(target, anchor);\n}\n\nfunction _unmount$1() {\n\tthis._fragment.unmount();\n}\n\nvar proto$1 = {\n\tdestroy: destroy$1,\n\tget: get$1,\n\tfire: fire$1,\n\tobserve: observe$1,\n\ton: on$1,\n\tset: set$1,\n\tteardown: destroy$1,\n\t_recompute: noop$1,\n\t_set: _set$1,\n\t_mount: _mount$1,\n\t_unmount: _unmount$1\n};\n\nvar template = (function() {\n// TODO: write a smaller, less \"featured\" focusTrap. It really just needs to trap focus\nconst makeFocusTrap = ({ rootElement }) => {\n  return focusTrap_1$1(rootElement, {\n    initialFocus: rootElement,\n    fallbackFocus: rootElement,\n    escapeDeactivates: false,\n    returnFocusOnDeactivate: true,\n    clickOutsideDeactivates: false\n  })\n};\n\n/* TODO: maybe make a way to accept custom transitions */\n// which might conflict with this todo:\n/* TODO: be fancy and take a touch/click/element position to transition in from */\nconst STYLE = {\n  'modal':   { 'open': { 'opacity': 1 }, 'hidden': { 'opacity': 0 } },\n  'content': { 'open': { 'scale': 1 },   'hidden': { 'scale': 0.9 } }\n};\nconst DEFAULTS = {\n  'initiallyHidden': false,\n  'initialFocusElement': false,\n  'center': true,\n  'zIndexBase': 1,\n  'pressScrimToDismiss': true,\n  'escToDismiss': true,\n  'trapFocus': true\n};\nconst FIRES = {\n  'opening': 'opening',\n  'opened': 'opened',\n\n  'result': 'result',\n  'dismissed': 'dismissed',\n  'closed': 'closed',\n\n  'hiding': 'hiding',\n  'hidden': 'hidden'\n};\nconst ONS = {\n  'open': 'open',\n  'dismiss': 'dismiss',\n  'close': 'close'\n};[ STYLE, DEFAULTS, FIRES, ONS ].forEach(Object.freeze);\n\nreturn {\n  setup (Modal) {\n    Object.assign(Modal, { DEFAULTS, FIRES, ONS });\n  },\n\n  data () {\n    return Object.assign({\n      'hidden': true,\n      'hiding': false,\n      'opening': false,\n      'inForeground': false, // to handle stacking of multiple modals open at once\n      'modalStyle': STYLE.modal.hidden,\n      'contentStyle': STYLE.content.hidden\n    }, DEFAULTS)\n  },\n\n  computed: {\n    transitioning: (hiding, opening) => hiding || opening,\n    open: (hidden, transitioning) => !hidden && !transitioning,\n    zIndex: (zIndexBase, inForeground) => inForeground ? zIndexBase : zIndexBase - 1\n  },\n\n  oncreate () {\n    this.on(ONS.open, () => this.open());\n    this.on(ONS.dismiss, e => this.dismiss(e));\n    this.on(ONS.close, e => this.close(e));\n\n    const rootElement = this.refs.modal;\n\n    this.focusTrap = makeFocusTrap({ rootElement });\n    this.on(FIRES.hiding, () => this.focusTrap.deactivate());\n    this.on('destroy', () => this.focusTrap.deactivate());\n\n    makeModalStackable(this);\n\n    this.on('opening', () => {\n\n      if (this.get('trapFocus')) {\n        this.focusTrap.activate();\n      }\n      setTimeout(() => {\n        /* focusTrap seems unable to focus the element\n           putting activate() in the setTimeout does not help\n           Focusing it manually works just fine,\n           and we need to manually focus anyway when trapFocus is false\n           also, I don't think focusTrap needs to concern itself with focusing elements\n        */\n        this.focusInitialFocusElement();\n      });\n    });\n\n    if (!this.get('initiallyHidden')) {\n      this.open();\n    }\n  },\n\n  methods: {\n    spring (key, end, options) {\n      options = options || { stiffness: 0.5, damping: 1 };\n      return spring.call(this, key, end, options)\n    },\n\n    focusInitialFocusElement () {\n      const initialFocusElement = this.get('initialFocusElement');\n      initialFocusElement && initialFocusElement.focus();\n    },\n\n    onKeyup (event) {\n      const shouldDismiss = event.key.toLowerCase() === 'escape'\n        && this.get('escToDismiss')\n        && this.get('inForeground');\n      if (shouldDismiss) {\n        this.dismiss();\n      }\n    },\n\n    onScrimPress () {\n      if (this.get('pressScrimToDismiss')) {\n        this.dismiss();\n      }\n    },\n\n    open () {\n      if (this.get('open') || this.get('opening')) { return }\n\n      this.set({ opening: true, hiding: false, hidden: false });\n      this.fire(FIRES.opening);\n\n      Promise.all([\n        this.spring('modalStyle', STYLE.modal.open),\n        this.spring('contentStyle', STYLE.content.open)\n      ])\n        .then(() => {\n          this.set({ opening: false });\n          this.fire(FIRES.opened);\n        });\n\n      return this\n    },\n\n    hide (reason, result) {\n      if (this.get('hidden') || this.get('hiding')) { return }\n\n      this.set({ opening: false, hiding: true });\n\n      this.fire(FIRES.result, result);\n      this.fire(reason, result);\n      this.fire(FIRES.hiding);\n\n      Promise.all([\n        this.spring('modalStyle', STYLE.modal.hidden),\n        this.spring('contentStyle', STYLE.content.hidden)\n      ])\n        .then(() => {\n          this.set({ hiding: false, hidden: true });\n          this.fire(FIRES.hidden);\n        });\n\n      return this\n    },\n\n    close (result) {\n      return this.hide(FIRES.closed, result)\n    },\n\n    dismiss (result) {\n      return this.hide(FIRES.dismissed, result)\n    },\n\n    background () {\n      this.focusTrap.pause();\n      this.set({ inForeground: false });\n    },\n\n    foreground (modal) {\n      this.focusTrap.unpause();\n      this.focusInitialFocusElement();\n      this.set({ inForeground: true });\n    }\n  }\n}\n}());\n\nfunction encapsulateStyles(node) {\n\tsetAttribute$1(node, \"svelte-433898519\", \"\");\n}\n\nfunction add_css() {\n\tvar style = createElement$1(\"style\");\n\tstyle.id = 'svelte-433898519-style';\n\tstyle.textContent = \".svelte-modal[svelte-433898519]{position:fixed;top:0;left:0;right:0;height:100%;display:flex;align-items:flex-start;justify-content:center}[data-center=\\\"true\\\"][svelte-433898519]{align-items:center}[data-hidden=\\\"true\\\"][svelte-433898519]{visibility:hidden}.content[svelte-433898519]{max-width:100vw;max-height:100vh;overflow:visible;z-index:1}\";\n\tappendNode$1(style, document.head);\n}\n\nfunction create_main_fragment(state, component) {\n\tvar text, div, div_1, slot_content_default = component._slotted.default, text_2, div_2, slot_content_scrim = component._slotted.scrim;\n\n\tfunction onwindowkeyup(event) {\n\t\tvar state = component.get();\n\t\tcomponent.onKeyup(event);\n\t}\n\twindow.addEventListener(\"keyup\", onwindowkeyup);\n\n\tfunction click_handler(event) {\n\t\tcomponent.onScrimPress();\n\t}\n\n\tvar scrim = new Scrim({\n\t\t_root: component._root\n\t});\n\n\treturn {\n\t\tcreate: function() {\n\t\t\ttext = createText(\"\\n\");\n\t\t\tdiv = createElement$1(\"div\");\n\t\t\tdiv_1 = createElement$1(\"div\");\n\t\t\ttext_2 = createText(\"\\n\\n  \");\n\t\t\tdiv_2 = createElement$1(\"div\");\n\t\t\tif (!slot_content_scrim) {\n\t\t\t\tscrim._fragment.create();\n\t\t\t}\n\t\t\tthis.hydrate();\n\t\t},\n\n\t\thydrate: function(nodes) {\n\t\t\tencapsulateStyles(div);\n\t\t\tdiv.className = \"svelte-modal\";\n\t\t\tdiv.tabIndex = \"-1\";\n\t\t\tsetAttribute$1(div, \"data-center\", state.center);\n\t\t\tsetAttribute$1(div, \"data-hidden\", state.hidden);\n\t\t\tsetStyle$1(div, \"z-index\", state.zIndex);\n\t\t\tsetStyle$1(div, \"opacity\", state.modalStyle.opacity);\n\t\t\tencapsulateStyles(div_1);\n\t\t\tdiv_1.className = \"content\";\n\t\t\tsetStyle$1(div_1, \"transform\", \"scale(\" + state.contentStyle.scale + \")\");\n\t\t\taddListener(div_2, \"click\", click_handler);\n\t\t},\n\n\t\tmount: function(target, anchor) {\n\t\t\tinsertNode$1(text, target, anchor);\n\t\t\tinsertNode$1(div, target, anchor);\n\t\t\tcomponent.refs.modal = div;\n\t\t\tappendNode$1(div_1, div);\n\t\t\tcomponent.refs.content = div_1;\n\n\t\t\tif (slot_content_default) {\n\t\t\t\tappendNode$1(slot_content_default, div_1);\n\t\t\t}\n\n\t\t\tappendNode$1(text_2, div);\n\t\t\tappendNode$1(div_2, div);\n\t\t\tif (!slot_content_scrim) {\n\t\t\t\tscrim._mount(div_2, null);\n\t\t\t}\n\n\t\t\tif (slot_content_scrim) {\n\t\t\t\tappendNode$1(slot_content_scrim, div_2);\n\t\t\t}\n\t\t},\n\n\t\tupdate: function(changed, state) {\n\t\t\tif ( changed.center ) {\n\t\t\t\tsetAttribute$1(div, \"data-center\", state.center);\n\t\t\t}\n\n\t\t\tif ( changed.hidden ) {\n\t\t\t\tsetAttribute$1(div, \"data-hidden\", state.hidden);\n\t\t\t}\n\n\t\t\tif ( changed.zIndex ) {\n\t\t\t\tsetStyle$1(div, \"z-index\", state.zIndex);\n\t\t\t}\n\n\t\t\tif ( changed.modalStyle ) {\n\t\t\t\tsetStyle$1(div, \"opacity\", state.modalStyle.opacity);\n\t\t\t}\n\n\t\t\tif ( changed.contentStyle ) {\n\t\t\t\tsetStyle$1(div_1, \"transform\", \"scale(\" + state.contentStyle.scale + \")\");\n\t\t\t}\n\t\t},\n\n\t\tunmount: function() {\n\t\t\tdetachNode$1(text);\n\t\t\tdetachNode$1(div);\n\n\t\t\tif (slot_content_default) {\n\t\t\t\treinsertChildren(div_1, slot_content_default);\n\t\t\t}\n\n\t\t\tif (slot_content_scrim) {\n\t\t\t\treinsertChildren(div_2, slot_content_scrim);\n\t\t\t}\n\t\t},\n\n\t\tdestroy: function() {\n\t\t\twindow.removeEventListener(\"keyup\", onwindowkeyup);\n\n\t\t\tif (component.refs.modal === div) component.refs.modal = null;\n\t\t\tif (component.refs.content === div_1) component.refs.content = null;\n\t\t\tremoveListener(div_2, \"click\", click_handler);\n\t\t\tif (!slot_content_scrim) {\n\t\t\t\tscrim.destroy(false);\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction Modal(options) {\n\tthis.options = options;\n\tthis.refs = {};\n\tthis._state = assign$1(template.data(), options.data);\n\tthis._recompute({}, this._state, {}, true);\n\n\tthis._observers = {\n\t\tpre: Object.create(null),\n\t\tpost: Object.create(null)\n\t};\n\n\tthis._handlers = Object.create(null);\n\n\tthis._root = options._root || this;\n\tthis._yield = options._yield;\n\tthis._bind = options._bind;\n\tthis._slotted = options.slots || {};\n\n\tif (!document.getElementById(\"svelte-433898519-style\")) add_css();\n\n\tvar oncreate = template.oncreate.bind(this);\n\n\tif (!options._root) {\n\t\tthis._oncreate = [oncreate];\n\t\tthis._beforecreate = [];\n\t\tthis._aftercreate = [];\n\t} else {\n\t \tthis._root._oncreate.push(oncreate);\n\t }\n\n\tthis.slots = {};\n\n\tthis._fragment = create_main_fragment(this._state, this);\n\n\tif (options.target) {\n\t\tthis._fragment.create();\n\t\tthis._fragment.mount(options.target, options.anchor || null);\n\n\t\tthis._lock = true;\n\t\tcallAll$1(this._beforecreate);\n\t\tcallAll$1(this._oncreate);\n\t\tcallAll$1(this._aftercreate);\n\t\tthis._lock = false;\n\t}\n}\n\nassign$1(Modal.prototype, template.methods, proto$1 );\n\nModal.prototype._recompute = function _recompute(changed, state, oldState, isInitial) {\n\tif ( isInitial || changed.hiding || changed.opening ) {\n\t\tif (differs$1((state.transitioning = template.computed.transitioning(state.hiding, state.opening)), oldState.transitioning)) changed.transitioning = true;\n\t}\n\n\tif ( isInitial || changed.hidden || changed.transitioning ) {\n\t\tif (differs$1((state.open = template.computed.open(state.hidden, state.transitioning)), oldState.open)) changed.open = true;\n\t}\n\n\tif ( isInitial || changed.zIndexBase || changed.inForeground ) {\n\t\tif (differs$1((state.zIndex = template.computed.zIndex(state.zIndexBase, state.inForeground)), oldState.zIndex)) changed.zIndex = true;\n\t}\n};\n\ntemplate.setup(Modal);\n\nexport default Modal;\n","function noop() {}\n\nfunction assign(target) {\n\tvar k,\n\t\tsource,\n\t\ti = 1,\n\t\tlen = arguments.length;\n\tfor (; i < len; i++) {\n\t\tsource = arguments[i];\n\t\tfor (k in source) target[k] = source[k];\n\t}\n\n\treturn target;\n}\n\nfunction appendNode(node, target) {\n\ttarget.appendChild(node);\n}\n\nfunction insertNode(node, target, anchor) {\n\ttarget.insertBefore(node, anchor);\n}\n\nfunction detachNode(node) {\n\tnode.parentNode.removeChild(node);\n}\n\nfunction detachBetween(before, after) {\n\twhile (before.nextSibling && before.nextSibling !== after) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction detachBefore(after) {\n\twhile (after.previousSibling) {\n\t\tafter.parentNode.removeChild(after.previousSibling);\n\t}\n}\n\nfunction detachAfter(before) {\n\twhile (before.nextSibling) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction reinsertBetween(before, after, target) {\n\twhile (before.nextSibling && before.nextSibling !== after) {\n\t\ttarget.appendChild(before.parentNode.removeChild(before.nextSibling));\n\t}\n}\n\nfunction reinsertChildren(parent, target) {\n\twhile (parent.firstChild) target.appendChild(parent.firstChild);\n}\n\nfunction reinsertAfter(before, target) {\n\twhile (before.nextSibling) target.appendChild(before.nextSibling);\n}\n\nfunction reinsertBefore(after, target) {\n\tvar parent = after.parentNode;\n\twhile (parent.firstChild !== after) target.appendChild(parent.firstChild);\n}\n\n// TODO this is out of date\nfunction destroyEach(iterations, detach, start) {\n\tfor (var i = start; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].destroy(detach);\n\t}\n}\n\nfunction createFragment() {\n\treturn document.createDocumentFragment();\n}\n\nfunction createElement(name) {\n\treturn document.createElement(name);\n}\n\nfunction createSvgElement(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\nfunction createText(data) {\n\treturn document.createTextNode(data);\n}\n\nfunction createComment() {\n\treturn document.createComment('');\n}\n\nfunction addListener(node, event, handler) {\n\tnode.addEventListener(event, handler, false);\n}\n\nfunction removeListener(node, event, handler) {\n\tnode.removeEventListener(event, handler, false);\n}\n\nfunction setAttribute(node, attribute, value) {\n\tnode.setAttribute(attribute, value);\n}\n\nfunction setXlinkAttribute(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\nfunction getBindingGroupValue(group) {\n\tvar value = [];\n\tfor (var i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.push(group[i].__value);\n\t}\n\treturn value;\n}\n\nfunction toNumber(value) {\n\treturn value === '' ? undefined : +value;\n}\n\nfunction children (element) {\n\treturn Array.from(element.childNodes);\n}\n\nfunction claimElement (nodes, name, attributes, svg) {\n\tfor (var i = 0; i < nodes.length; i += 1) {\n\t\tvar node = nodes[i];\n\t\tif (node.nodeName === name) {\n\t\t\tfor (var j = 0; j < node.attributes.length; j += 1) {\n\t\t\t\tvar attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) node.removeAttribute(attribute.name);\n\t\t\t}\n\t\t\treturn nodes.splice(i, 1)[0]; // TODO strip unwanted attributes\n\t\t}\n\t}\n\n\treturn svg ? createSvgElement(name) : createElement(name);\n}\n\nfunction claimText (nodes, data) {\n\tfor (var i = 0; i < nodes.length; i += 1) {\n\t\tvar node = nodes[i];\n\t\tif (node.nodeType === 3) {\n\t\t\tnode.data = data;\n\t\t\treturn nodes.splice(i, 1)[0];\n\t\t}\n\t}\n\n\treturn createText(data);\n}\n\nfunction setInputType(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {}\n}\n\nfunction setStyle(node, key, value) {\n\tnode.style.setProperty(key, value);\n}\n\nfunction linear(t) {\n\treturn t;\n}\n\nfunction generateRule(\n\ta,\n\tb,\n\tdelta,\n\tduration,\n\tease,\n\tfn\n) {\n\tvar keyframes = '{\\n';\n\n\tfor (var p = 0; p <= 1; p += 16.666 / duration) {\n\t\tvar t = a + delta * ease(p);\n\t\tkeyframes += p * 100 + '%{' + fn(t) + '}\\n';\n\t}\n\n\treturn keyframes + '100% {' + fn(b) + '}\\n}';\n}\n\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n\tvar hash = 5381;\n\tvar i = str.length;\n\n\twhile (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n\treturn hash >>> 0;\n}\n\nfunction wrapTransition(component, node, fn, params, intro, outgroup) {\n\tvar obj = fn(node, params);\n\tvar duration = obj.duration || 300;\n\tvar ease = obj.easing || linear;\n\tvar cssText;\n\n\t// TODO share <style> tag between all transitions?\n\tif (obj.css && !transitionManager.stylesheet) {\n\t\tvar style = createElement('style');\n\t\tdocument.head.appendChild(style);\n\t\ttransitionManager.stylesheet = style.sheet;\n\t}\n\n\tif (intro) {\n\t\tif (obj.css && obj.delay) {\n\t\t\tcssText = node.style.cssText;\n\t\t\tnode.style.cssText += obj.css(0);\n\t\t}\n\n\t\tif (obj.tick) obj.tick(0);\n\t}\n\n\treturn {\n\t\tt: intro ? 0 : 1,\n\t\trunning: false,\n\t\tprogram: null,\n\t\tpending: null,\n\t\trun: function(intro, callback) {\n\t\t\tvar program = {\n\t\t\t\tstart: window.performance.now() + (obj.delay || 0),\n\t\t\t\tintro: intro,\n\t\t\t\tcallback: callback\n\t\t\t};\n\n\t\t\tif (obj.delay) {\n\t\t\t\tthis.pending = program;\n\t\t\t} else {\n\t\t\t\tthis.start(program);\n\t\t\t}\n\n\t\t\tif (!this.running) {\n\t\t\t\tthis.running = true;\n\t\t\t\ttransitionManager.add(this);\n\t\t\t}\n\t\t},\n\t\tstart: function(program) {\n\t\t\tcomponent.fire(program.intro ? 'intro.start' : 'outro.start', { node: node });\n\n\t\t\tprogram.a = this.t;\n\t\t\tprogram.b = program.intro ? 1 : 0;\n\t\t\tprogram.delta = program.b - program.a;\n\t\t\tprogram.duration = duration * Math.abs(program.b - program.a);\n\t\t\tprogram.end = program.start + program.duration;\n\n\t\t\tif (obj.css) {\n\t\t\t\tif (obj.delay) node.style.cssText = cssText;\n\n\t\t\t\tprogram.rule = generateRule(\n\t\t\t\t\tprogram.a,\n\t\t\t\t\tprogram.b,\n\t\t\t\t\tprogram.delta,\n\t\t\t\t\tprogram.duration,\n\t\t\t\t\tease,\n\t\t\t\t\tobj.css\n\t\t\t\t);\n\n\t\t\t\ttransitionManager.addRule(program.rule, program.name = '__svelte_' + hash(program.rule));\n\n\t\t\t\tnode.style.animation = (node.style.animation || '')\n\t\t\t\t\t.split(', ')\n\t\t\t\t\t.filter(function(anim) {\n\t\t\t\t\t\t// when introing, discard old animations if there are any\n\t\t\t\t\t\treturn anim && (program.delta < 0 || !/__svelte/.test(anim));\n\t\t\t\t\t})\n\t\t\t\t\t.concat(program.name + ' ' + duration + 'ms linear 1 forwards')\n\t\t\t\t\t.join(', ');\n\t\t\t}\n\n\t\t\tthis.program = program;\n\t\t\tthis.pending = null;\n\t\t},\n\t\tupdate: function(now) {\n\t\t\tvar program = this.program;\n\t\t\tif (!program) return;\n\n\t\t\tvar p = now - program.start;\n\t\t\tthis.t = program.a + program.delta * ease(p / program.duration);\n\t\t\tif (obj.tick) obj.tick(this.t);\n\t\t},\n\t\tdone: function() {\n\t\t\tvar program = this.program;\n\t\t\tthis.t = program.b;\n\t\t\tif (obj.tick) obj.tick(this.t);\n\t\t\tif (obj.css) transitionManager.deleteRule(node, program.name);\n\t\t\tprogram.callback();\n\t\t\tprogram = null;\n\t\t\tthis.running = !!this.pending;\n\t\t},\n\t\tabort: function() {\n\t\t\tif (obj.tick) obj.tick(1);\n\t\t\tif (obj.css) transitionManager.deleteRule(node, this.program.name);\n\t\t\tthis.program = this.pending = null;\n\t\t\tthis.running = false;\n\t\t}\n\t};\n}\n\nvar transitionManager = {\n\trunning: false,\n\ttransitions: [],\n\tbound: null,\n\tstylesheet: null,\n\tactiveRules: {},\n\n\tadd: function(transition) {\n\t\tthis.transitions.push(transition);\n\n\t\tif (!this.running) {\n\t\t\tthis.running = true;\n\t\t\trequestAnimationFrame(this.bound || (this.bound = this.next.bind(this)));\n\t\t}\n\t},\n\n\taddRule: function(rule, name) {\n\t\tif (!this.activeRules[name]) {\n\t\t\tthis.activeRules[name] = true;\n\t\t\tthis.stylesheet.insertRule('@keyframes ' + name + ' ' + rule, this.stylesheet.cssRules.length);\n\t\t}\n\t},\n\n\tnext: function() {\n\t\tthis.running = false;\n\n\t\tvar now = window.performance.now();\n\t\tvar i = this.transitions.length;\n\n\t\twhile (i--) {\n\t\t\tvar transition = this.transitions[i];\n\n\t\t\tif (transition.program && now >= transition.program.end) {\n\t\t\t\ttransition.done();\n\t\t\t}\n\n\t\t\tif (transition.pending && now >= transition.pending.start) {\n\t\t\t\ttransition.start(transition.pending);\n\t\t\t}\n\n\t\t\tif (transition.running) {\n\t\t\t\ttransition.update(now);\n\t\t\t\tthis.running = true;\n\t\t\t} else if (!transition.pending) {\n\t\t\t\tthis.transitions.splice(i, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (this.running) {\n\t\t\trequestAnimationFrame(this.bound);\n\t\t} else if (this.stylesheet) {\n\t\t\tvar i = this.stylesheet.cssRules.length;\n\t\t\twhile (i--) this.stylesheet.deleteRule(i);\n\t\t\tthis.activeRules = {};\n\t\t}\n\t},\n\n\tdeleteRule: function(node, name) {\n\t\tnode.style.animation = node.style.animation\n\t\t\t.split(', ')\n\t\t\t.filter(function(anim) {\n\t\t\t\treturn anim.slice(0, name.length) !== name;\n\t\t\t})\n\t\t\t.join(', ');\n\t}\n};\n\nfunction destroy(detach) {\n\tthis.destroy = noop;\n\tthis.fire('destroy');\n\tthis.set = this.get = noop;\n\n\tif (detach !== false) this._fragment.unmount();\n\tthis._fragment.destroy();\n\tthis._fragment = this._state = null;\n}\n\nfunction destroyDev(detach) {\n\tdestroy.call(this, detach);\n\tthis.destroy = function() {\n\t\tconsole.warn('Component was already destroyed');\n\t};\n}\n\nfunction differs(a, b) {\n\treturn a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\n\nfunction dispatchObservers(component, group, changed, newState, oldState) {\n\tfor (var key in group) {\n\t\tif (!changed[key]) continue;\n\n\t\tvar newValue = newState[key];\n\t\tvar oldValue = oldState[key];\n\n\t\tvar callbacks = group[key];\n\t\tif (!callbacks) continue;\n\n\t\tfor (var i = 0; i < callbacks.length; i += 1) {\n\t\t\tvar callback = callbacks[i];\n\t\t\tif (callback.__calling) continue;\n\n\t\t\tcallback.__calling = true;\n\t\t\tcallback.call(component, newValue, oldValue);\n\t\t\tcallback.__calling = false;\n\t\t}\n\t}\n}\n\nfunction get(key) {\n\treturn key ? this._state[key] : this._state;\n}\n\nfunction fire(eventName, data) {\n\tvar handlers =\n\t\teventName in this._handlers && this._handlers[eventName].slice();\n\tif (!handlers) return;\n\n\tfor (var i = 0; i < handlers.length; i += 1) {\n\t\thandlers[i].call(this, data);\n\t}\n}\n\nfunction observe(key, callback, options) {\n\tvar group = options && options.defer\n\t\t? this._observers.post\n\t\t: this._observers.pre;\n\n\t(group[key] || (group[key] = [])).push(callback);\n\n\tif (!options || options.init !== false) {\n\t\tcallback.__calling = true;\n\t\tcallback.call(this, this._state[key]);\n\t\tcallback.__calling = false;\n\t}\n\n\treturn {\n\t\tcancel: function() {\n\t\t\tvar index = group[key].indexOf(callback);\n\t\t\tif (~index) group[key].splice(index, 1);\n\t\t}\n\t};\n}\n\nfunction observeDev(key, callback, options) {\n\tvar c = (key = '' + key).search(/[^\\w]/);\n\tif (c > -1) {\n\t\tvar message =\n\t\t\t'The first argument to component.observe(...) must be the name of a top-level property';\n\t\tif (c > 0)\n\t\t\tmessage += \", i.e. '\" + key.slice(0, c) + \"' rather than '\" + key + \"'\";\n\n\t\tthrow new Error(message);\n\t}\n\n\treturn observe.call(this, key, callback, options);\n}\n\nfunction on(eventName, handler) {\n\tif (eventName === 'teardown') return this.on('destroy', handler);\n\n\tvar handlers = this._handlers[eventName] || (this._handlers[eventName] = []);\n\thandlers.push(handler);\n\n\treturn {\n\t\tcancel: function() {\n\t\t\tvar index = handlers.indexOf(handler);\n\t\t\tif (~index) handlers.splice(index, 1);\n\t\t}\n\t};\n}\n\nfunction onDev(eventName, handler) {\n\tif (eventName === 'teardown') {\n\t\tconsole.warn(\n\t\t\t\"Use component.on('destroy', ...) instead of component.on('teardown', ...) which has been deprecated and will be unsupported in Svelte 2\"\n\t\t);\n\t\treturn this.on('destroy', handler);\n\t}\n\n\treturn on.call(this, eventName, handler);\n}\n\nfunction set(newState) {\n\tthis._set(assign({}, newState));\n\tif (this._root._lock) return;\n\tthis._root._lock = true;\n\tcallAll(this._root._beforecreate);\n\tcallAll(this._root._oncreate);\n\tcallAll(this._root._aftercreate);\n\tthis._root._lock = false;\n}\n\nfunction _set(newState) {\n\tvar oldState = this._state,\n\t\tchanged = {},\n\t\tdirty = false;\n\n\tfor (var key in newState) {\n\t\tif (differs(newState[key], oldState[key])) changed[key] = dirty = true;\n\t}\n\tif (!dirty) return;\n\n\tthis._state = assign({}, oldState, newState);\n\tthis._recompute(changed, this._state, oldState, false);\n\tif (this._bind) this._bind(changed, this._state);\n\tdispatchObservers(this, this._observers.pre, changed, this._state, oldState);\n\tthis._fragment.update(changed, this._state);\n\tdispatchObservers(this, this._observers.post, changed, this._state, oldState);\n}\n\nfunction _setDev(newState) {\n\tif (typeof newState !== 'object') {\n\t\tthrow new Error(\n\t\t\tthis._debugName + ' .set was called without an object of data key-values to update.'\n\t\t);\n\t}\n\n\tthis._checkReadOnly(newState);\n\t_set.call(this, newState);\n}\n\nfunction callAll(fns) {\n\twhile (fns && fns.length) fns.pop()();\n}\n\nfunction _mount(target, anchor) {\n\tthis._fragment.mount(target, anchor);\n}\n\nfunction _unmount() {\n\tthis._fragment.unmount();\n}\n\nvar proto = {\n\tdestroy: destroy,\n\tget: get,\n\tfire: fire,\n\tobserve: observe,\n\ton: on,\n\tset: set,\n\tteardown: destroy,\n\t_recompute: noop,\n\t_set: _set,\n\t_mount: _mount,\n\t_unmount: _unmount\n};\n\nvar protoDev = {\n\tdestroy: destroyDev,\n\tget: get,\n\tfire: fire,\n\tobserve: observeDev,\n\ton: onDev,\n\tset: set,\n\tteardown: destroyDev,\n\t_recompute: noop,\n\t_set: _setDev,\n\t_mount: _mount,\n\t_unmount: _unmount\n};\n\nexport { destroy, destroyDev, differs, dispatchObservers, get, fire, observe, observeDev, on, onDev, set, _set, _setDev, callAll, _mount, _unmount, proto, protoDev, appendNode, insertNode, detachNode, detachBetween, detachBefore, detachAfter, reinsertBetween, reinsertChildren, reinsertAfter, reinsertBefore, destroyEach, createFragment, createElement, createSvgElement, createText, createComment, addListener, removeListener, setAttribute, setXlinkAttribute, getBindingGroupValue, toNumber, children, claimElement, claimText, setInputType, setStyle, linear, generateRule, hash, wrapTransition, transitionManager, noop, assign };\n","<div class=\"content\">\n  <p>Here is some modal content.</p>\n  <p>It is interesting... or whatever.</p>\n  <button ref:dismiss on:click=\"closeModal('dismiss', 'It got dismissed.')\">Dismiss Modal</button>\n  <button ref:close on:click=\"closeModal('close', `It's come to a close.`)\">Close Modal</button>\n</div>\n\n<script>\nexport default {\n  oncreate () {\n    this.set({ initialFocusElement: this.refs.close })\n  },\n\n  methods: {\n    closeModal (method, message) {\n      this.fire(`modal.${method}`, message)\n    }\n  }\n}\n</script>\n\n<style>\n.content {\n  background: white;\n  padding: 30px;\n  border-radius: 4px;\n  margin: 10px;\n  max-height: calc(100vh - 20px);\n  overflow-y: auto;\n}\n</style>\n","<h1>svelte-modal</h1>\n\n<label>\n  Center modal\n  <input type=\"checkbox\" bind:checked=\"center\"/>\n</label>\n\n<label>\n  Trap focus\n  <input type=\"checkbox\" bind:checked=\"trapFocus\"/>\n</label>\n\n<button on:click=\"set({ shouldShowModal: true, modalResult: '' })\">Open Modal</button>\n\n<p><strong>Modal result:</strong> {{ modalResult || '' }}</p>\n\n{{#if shouldShowModal}}\n  <Modal\n    ref:modal\n    bind:opening\n    bind:hiding\n    :initialFocusElement\n    :center\n    :trapFocus\n    on:result=\"set({ modalResult: event })\"\n    on:hidden=\"set({ shouldShowModal: false })\"\n  >\n    <ModalContent\n      ref:modalContent\n      bind:initialFocusElement\n      on:modal.dismiss=\"refs.modal.dismiss(event)\"\n      on:modal.close=\"refs.modal.close(event)\"\n    />\n  </Modal>\n  <p>\n    <strong>Modal state:</strong>\n    { opening: {{ opening }}, hiding: {{ hiding }} }\n  </p>\n{{/if}}\n\n<script>\nimport Modal from '../../'\nimport ModalContent from './ModalContent.html'\n\nexport default {\n  data () {\n    return Object.assign({}, Modal.DEFAULTS, {\n      shouldShowModal: false,\n      modalResult: 'None thus far.',\n      showModalResult: false\n    })\n  },\n\n  components: { Modal, ModalContent }\n}\n</script>\n","import Demo from './Demo.html'\n\nwindow.app = new Demo({ target: document.getElementById('app') })\n"],"names":["isDate","obj","Object","prototype","toString","call","snap$1","key","a","b","options","object","number","velocity","stiffness","damping","valueThreshold","Math","abs","velocityThreshold","date","dummy","subspring","getTime","Date","array","value","subsprings","i","length","push","getSpring","active","k","type","Array","isArray","Error","keysMatch","spring","to","_this","this","_springs","create","_springCallbacks","_springing","set_1","set","data","key_1","get","promise","Promise","fulfil","scheduler$1","add","aKeys","keys","bKeys","noop","assign","target","source","len","arguments","appendNode","node","appendChild","insertNode","anchor","insertBefore","detachNode","parentNode","removeChild","createElement","name","document","setAttribute","attribute","setStyle","style","setProperty","destroy","detach","fire","_fragment","unmount","_state","differs","dispatchObservers","component","group","changed","newState","oldState","newValue","oldValue","callbacks","callback","__calling","callAll","fns","pop","encapsulateStyles$1","add_css$1","id","textContent","head","create_main_fragment$1","state","div","hydrate","g","nodes","className","opacity","background","mount","update","h","Scrim","template$1","_observers","O","F","_handlers","_root","_yield","_bind","getElementById","createIsUnavailable","isOff","nodeComputedStyle","documentElement","isOffCache","result","window","getComputedStyle","display","computedStyle","visibility","isEscapeEvent","e","keyCode","tryFocus","focus","tagName","toLowerCase","select","noop$1","assign$1","appendNode$1","insertNode$1","detachNode$1","reinsertChildren","parent","firstChild","createElement$1","createText","createTextNode","addListener","event","handler","addEventListener","removeListener","removeEventListener","setAttribute$1","setStyle$1","destroy$1","differs$1","dispatchObservers$1","callAll$1","encapsulateStyles","add_css","create_main_fragment","onwindowkeyup","onKeyup","click_handler","onScrimPress","text","div_1","text_2","div_2","slot_content_default","_slotted","default","slot_content_scrim","scrim","_","tabIndex","center","hidden","zIndex","modalStyle","contentStyle","scale","refs","modal","content","_mount","Modal","template","_recompute","slots","oncreate","bind","_oncreate","_beforecreate","_aftercreate","_lock","createFragment","createDocumentFragment","createComment","closeModal","Y","$","modalResult","trapFocus","shouldShowModal","initialFocusElement","dismiss","close","opening","hiding","X","Z","components","indexOf","running","requestAnimationFrame","next","hasComponents","hasSprings","spring_1","splice","proto","l","eventName","handlers","slice","observe","defer","post","pre","init","cancel","index","J","on","_set","tt","R","G","dirty","P","W","DEFAULTS","freeze","[object Object]","setup","tabbable","el","candidate","candidateIndex","basicTabbables","orderedTabbables","isUnavailable","candidateSelectors","candidates","querySelectorAll","parseInt","getAttribute","disabled","et","tabbableNodes","sort","map","apply","listeningFocusTrap","focusTrap_1$1","element","userOptions","deactivate","deactivateOptions","defaultedDeactivateOptions","ot","undefined","returnFocus","config","returnFocusOnDeactivate","rt","onDeactivate","removeListeners","setTimeout","nodeFocusedBeforeActivation","paused","addListeners","pause","trap","updateTabbableNodes","firstFocusNode","checkFocus","checkClick","checkPointerDown","checkKey","getNodeForOption","optionName","optionValue","querySelector","container","contains","activeElement","clickOutsideDeactivates","preventDefault","stopImmediatePropagation","blur","handleTab","escapeDeactivates","currentFocusIndex","lastTabbableNode","firstTabbableNode","shiftKey","ht","activateOptions","defaultedActivateOptions","at","onActivate","ft","unpause","activeModals","makeModalStackable","forEach","foreground","hiddenListener","destroyListener","nextModal","constructor","FIRES","proto$1","makeFocusTrap","rootElement","vt","pt","ct","st","ut","STYLE","open","initiallyHidden","zIndexBase","pressScrimToDismiss","escToDismiss","opened","dismissed","closed","ONS","it","dt","yt","inForeground","gt","bt","transitioning","focusTrap","activate","focusInitialFocusElement","Ot","end","t","all","then","reason","hide","methods","isInitial","computed","method","message","kt","app","Demo"],"mappings":"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"}